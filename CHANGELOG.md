# Changelog
All notable changes to this project will be documented in this file.

## [0.17.3] - 2022-02-05

### Bug Fixes

- Status report generation is prevented for bundles with source EID of dtn:none
- Buffering TCPCL pakets for efficiency
- Upgraded bp7 dependencies to make behaviour RFC9171 compliant

### Documentation

- Updated to point to new RFC 9171 and fixed some links
- Added comments to example configuration file

### Features

- Allow RUST_LOG to override debug level CLI parameteres, e.g., for enabling trace for different components
- Added error log with bundle hex string if decoding fails for further inspection

### Miscellaneous Tasks

- Upgraded to newest bp7 crate
- Made logging more fine-grained in ipnd, verbose parts now trace log level instead of debug

### Refactor

- Using clap derive interface for command line args, except for dtnd

### Testing

- Deactivated debug logging for midsize_fixed clab scenario

## [0.17.2] - 2022-02-01

### Bug Fixes

- Tcp refuse-existing-bundles behavior fixed, cla local/global options introduced (#10)
- Pinned tokio version to 1.15.0 to work around bug in 1.16.1
- Forced socket non-blocking for compability with new tokio releases

### Features

- Add bundle retransmission prevention extension to TCPCL (#8)
- (re)process oldest bundles first
- Added creation timestamp as well as received time to bundlepack meta data
- Peer address can be a generic broadcast, e.g., for use with LoRa

### Miscellaneous Tasks

- Removed dead code for transmission counters

### Refactor

- Changed websocket json data mode to encode byte buffers as base64
- Changed from tokio mutex to parking_lot for websockets
- Change project to workspace and include codegen crate (#11)

### Styling

- Fixed string related remarks found by clippy

### Testing

- Changed clab tests to use TCPCL instead of MTCPCL

## [0.17.1] - 2021-11-18

### Documentation

- Updated README and CLI help to reflect latest protocol and code changes
- Added `doc/http-client-api.md, documenting the http client api and websocket interface.
- Added section about JSON mode in http client API documentation
- Updated README to point to the different guides and include the new features

### Features

- Added `/json` mode for clients without CBOR and the `/node` command now returns the node id via ws

### Example

- Added `dtnecho_json.go` illustrating how to write clients using only JSON and websockets

## [0.17.0] - 2021-11-04

### Features

- Implemented TCP convergence layer draft (v28)

### Miscellaneous Tasks

- Upgraded d7sneakers version, it now bundles sqlite
- Added armv7 target for binary releases

### Refactor

- Changed DtnPeer to carry not only IpAddresses but a an enum with IpAddr and Generic(String)

## [0.16.16] - 2021-11-02

### Bug Fixes

- Fixed registering of non-singleton endpoints during startup of dtnd
- Removed misleading log message about "peer not seen" for static peers
- Made all test shell scripts normalize bundle counting output
- DtnPeer doctests would fail in some cases as static peers never timeout. Now only dynamic ones are generated for the test.
- Changed cbor decoding to also work on 32bit machines
- Upgraded to axum 0.3 to fix long compile times with rustc 1.56

### Styling

- Removed unneeded import in http cla

### Testing

- Added test for non-singleton group communication

## [0.16.15] - 2021-10-01

### Bug Fixes

- Eliminated potential deadlock in mtcp send_bundles

### Features

- Made http cla async

### Refactor

- Cleaned up logging of received bundles

### Testing

- Fixed typo in output of 3 node  scenario
- Added test chaining all CLAs (`cla_chain_test.sh`) with multiple nodes
- Added cla chain test to `run_all_tests.sh`
- Added mixsize-fixed clab scenario with 32 nodes and large bundle generation

## [0.16.14] - 2021-09-27

### Bug Fixes

- Only list bundle IDs for ones that have not been deleted

### Features

- Generic filter function for constraints

### Miscellaneous Tasks

- Removed obsolete TODO in process_bundles

### Refactor

- Made bundle removing explict processing::forward

### Testing

- Added test for status report generation to local_nodes_dtn.sh

## [0.16.13] - 2021-09-11

### Features

- Added config file and CLI options to enable/disable status report generation
- Websocket teardown now removes callback from application agents for subscribed endpoints

### Ci

- Added script to run all integration tests

## [0.16.12] - 2021-09-10

### Miscellaneous Tasks

- Cleaned up some leftover TODOs

### Build

- Updated bp7 to version with much less deps
- Added Cargo.lock

## [0.16.11] - 2021-09-09

### Features

- Added flag to output raw bundle instead of payload

<!-- generated by git-cliff -->
